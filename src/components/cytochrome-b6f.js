/**
 * Cytochrome b₆f
 */

const el = `<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0" y="0" width="1400" height="600" viewBox="0, 0, 1400, 600">
  <g id="cytochrome-b6f" transform="translate(0, 0)">
    <g id="core">
      <path d="M655.498,267.457 C675.147,267.457 691.076,293.75 691.076,326.183 C691.192,332.982 690.245,339.323 688.994,345.965 C699.86,349.08 703.904,361.547 704.283,371.638 C704.283,386.256 695.46,398.106 684.576,398.106 C675.306,397.791 669.131,390.242 666.527,381.963 C663.169,383.981 659.363,384.747 655.498,384.909 C646.635,384.927 639.904,379.589 634.281,373.32 C640.079,370.835 644.441,366.313 644.888,359.837 C644.301,348.973 632.875,344.517 623.487,344.171 L621.677,344.237 C620.378,338.308 620.013,332.235 619.92,326.183 C619.992,321.52 619.905,324.167 620.268,318.247 C621.897,319.181 623.796,319.344 625.629,319.445 C633.624,319.445 640.104,312.363 640.104,303.627 C640.004,296.459 635.609,289.785 628.42,288.182 C633.651,277.454 643.014,267.978 655.498,267.457 z" fill="#B2C7DA"/>
      <path d="M655.498,267.457 C675.147,267.457 691.076,293.75 691.076,326.183 C691.192,332.982 690.245,339.323 688.994,345.965 C699.86,349.08 703.904,361.547 704.283,371.638 C704.283,386.256 695.46,398.106 684.576,398.106 C675.306,397.791 669.131,390.242 666.527,381.963 C663.169,383.981 659.363,384.747 655.498,384.909 C646.635,384.927 639.904,379.589 634.281,373.32 C640.079,370.835 644.441,366.313 644.888,359.837 C644.301,348.973 632.875,344.517 623.487,344.171 L621.677,344.237 C620.378,338.308 620.013,332.235 619.92,326.183 C619.992,321.52 619.905,324.167 620.268,318.247 C621.897,319.181 623.796,319.344 625.629,319.445 C633.624,319.445 640.104,312.363 640.104,303.627 C640.004,296.459 635.609,289.785 628.42,288.182 C633.651,277.454 643.014,267.978 655.498,267.457 z" fill-opacity="0" stroke="#000000" stroke-width="1"/>
    </g>
    <g id="rieske">
      <path d="M661.032,384.909 C661.032,395.793 653.332,405.166 639.099,405.166 C624.867,405.166 613.944,397.91 613.944,387.026 C613.944,376.143 625.523,370.284 639.756,370.284 C653.988,370.284 661.032,374.025 661.032,384.909 z" fill="#B2C7DA"/>
      <path d="M661.032,384.909 C661.032,395.793 653.332,405.166 639.099,405.166 C624.867,405.166 613.944,397.91 613.944,387.026 C613.944,376.143 625.523,370.284 639.756,370.284 C653.988,370.284 661.032,374.025 661.032,384.909 z" fill-opacity="0" stroke="#000000" stroke-width="1"/>
    </g>
    <path d="M715.576,471.247 C704.692,471.247 695.869,459.397 695.869,444.779 C695.869,430.161 704.692,418.311 715.576,418.311 C726.46,418.311 735.283,430.161 735.283,444.779 C735.283,459.397 726.46,471.247 715.576,471.247 z" fill-opacity="0" stroke="#000000" stroke-width="2" display="none"/>
    <path d="M652.677,417.378 C651.378,411.449 651.013,405.375 650.92,399.324 C650.992,394.66 650.905,397.307 651.268,391.387 C652.897,392.321 654.796,392.485 656.629,392.586 C664.624,392.586 671.104,385.504 671.104,376.767 C671.004,369.599 666.609,362.925 659.42,361.323 C664.651,350.595 674.014,341.119 686.498,340.598 C706.147,340.598 722.076,366.89 722.076,399.324 C722.076,431.757 706.147,458.049 686.498,458.049 C677.635,458.068 670.904,452.729 665.281,446.46 C671.079,443.976 675.441,439.454 675.888,432.978 C675.301,422.114 663.875,417.658 654.487,417.311 L652.677,417.378 z" fill-opacity="0" stroke="#000000" stroke-width="2" display="none"/>
    <g id="cofactors">
      <g id="b6l">
        <text transform="matrix(1, 0, 0, 1, 666.625, 340.175)">
          <tspan x="-2.781" y="1.5" font-family="ArialMT" font-size="10" fill="#000000">b</tspan>
        </text>
        <text transform="matrix(1, 0, 0, 1, 670.266, 343.072)">
          <tspan x="-1.668" y="1" font-family="Arial-ItalicMT" font-size="6" fill="#000000">L</tspan>
        </text>
      </g>
      <text transform="matrix(1, 0, 0, 1, 648.547, 306.901)">
        <tspan x="-5.558" y="1.5" font-family="ArialMT" font-size="10" fill="#000000">Q</tspan>
        <tspan x="2.221" y="1.5" font-family="ArialMT" font-size="6" fill="#000000">n</tspan>
      </text>
      <path d="M656.401,344.833 L661.727,340.305" fill-opacity="0" stroke="#000000" stroke-width="1"/>
      <path d="M662.635,360.504 L657.061,355.749" fill-opacity="0" stroke="#000000" stroke-width="1"/>
      <text transform="matrix(1, 0, 0, 1, 687.415, 389.241)">
        <tspan x="-1.389" y="1.5" font-family="Arial-ItalicMT" font-size="10" fill="#000000">f</tspan>
      </text>
      <path d="M684.843,383.195 L678.856,375.36" fill-opacity="0" stroke="#000000" stroke-width="1"/>
      <text transform="matrix(1, 0, 0, 1, 669.694, 367.504)">
        <tspan x="-13.793" y="2.5" font-family="ArialMT" font-size="10" fill="#000000">Fe</tspan>
        <tspan x="-2.123" y="2.5" font-family="LucidaGrande" font-size="10" fill="#000000">₂</tspan>
        <tspan x="2.095" y="2.5" font-family="ArialMT" font-size="10" fill="#000000">S</tspan>
        <tspan x="8.765" y="2.5" font-family="LucidaGrande" font-size="10" fill="#000000">₂</tspan>
      </text>
      <g id="b6h">
        <text transform="matrix(1, 0, 0, 1, 666.127, 314.582)">
          <tspan x="-2.781" y="1.5" font-family="ArialMT" font-size="10" fill="#000000">b</tspan>
        </text>
        <text transform="matrix(1, 0, 0, 1, 670.266, 317.479)">
          <tspan x="-2.167" y="1" font-family="Arial-ItalicMT" font-size="6" fill="#000000">H</tspan>
        </text>
      </g>
      <path d="M667.23,330.916 L667.23,322.27" fill-opacity="0" stroke="#000000" stroke-width="1"/>
      <text transform="matrix(1, 0, 0, 1, 650.529, 350.479)">
        <tspan x="-5.558" y="1.5" font-family="ArialMT" font-size="10" fill="#000000">Q</tspan>
        <tspan x="2.221" y="1.5" font-family="ArialMT" font-size="6" fill="#000000">p</tspan>
      </text>
      <path d="M661.975,313.358 L656.401,308.603" fill-opacity="0" stroke="#000000" stroke-width="1"/>
    </g>
    <g id="label">
      <text transform="matrix(1, 0, 0, 1, 654.194, 574.038)">
        <tspan x="-72.705" y="5" font-family="ArialMT" font-size="21" fill="#000000">Cytochrome </tspan>
        <tspan x="46.332" y="5" font-family="Arial-ItalicMT" font-size="21" fill="#000000">b</tspan>
        <tspan x="58.011" y="5" font-family="LucidaGrande" font-size="21" fill="#000000">₆</tspan>
        <tspan x="66.871" y="5" font-family="Arial-ItalicMT" font-size="21" fill="#000000">f</tspan>
      </text>
    </g>
  </g>
</svg>`;

const cytochromeB6f = ({ coreColor = "#B2C7DA", rieskeColor = "#B2C7DA", rieske = true, cofactors = false, label = true, position = null } = {}) => {

  let draw = SVG();
  draw.svg(el);

  if (coreColor) {
    let coreShapes = draw.find('#cytochrome-b6f #core path');
    coreShapes.forEach(shape => shape.fill(coreColor));
  }

  if (rieskeColor) {
    let rieskeShapes = draw.find('#cytochrome-b6f #rieske path');
    rieskeShapes.forEach(shape => shape.fill(rieskeColor));
  }

  if (!cofactors) {
    let shape = draw.findOne('#cytochrome-b6f #cofactors');
    shape.opacity(0);
  }

  if (!rieske) {
    let shape = draw.findOne('#cytochrome-b6f #rieske');
    shape.opacity(0);
  }

  if (!label) {
    let labelText = draw.findOne('#cytochrome-b6f #label')
    labelText.opacity(0);
  }

  if (position) {
    let move = draw.findOne('#cytochrome-b6f');
    move.transform({
      translateX: position - move.x()
    })
  }

  return draw.findOne('svg').svg(false);
}

export default cytochromeB6f;

export const settings = () => {

  let draw = SVG();
  draw.svg(el);

  let move = draw.findOne('#cytochrome-b6f')

  return {
    "id": "cytochrome-b6f",
    "headerTitle": "Cytochrome&nbsp;<em>b₆f</em>",
    "show": true,
    "options": [
      { "type": "check", "name": "cofactors", "value": false, "label": "Cofactors" },
      { "type": "check", "name": "rieske", "value": true, "label": "Rieske Complex" },
      { "type": "check", "name": "label", "value": true, "label": "Label" },
      { "type": "color", "name": "coreColor", "value": "#B2C7DA", "label": "Core Color" },
      { "type": "color", "name": "rieskeColor", "value": "#B2C7DA", "label": "Rieske Color" },
      { "type": "range", "name": "position", "value": move.x(), "label": "Position", "step": "1", "min": "0", "max": 1400 - move.width() },
    ]
  }
}

export const legend = () => {
  return ``
}