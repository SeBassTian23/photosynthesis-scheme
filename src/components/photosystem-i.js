/**
 * Photosystem I
 */

const el = `<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0" y="0" width="1400" height="600" viewBox="0, 0, 1400, 600">
  <g id="photosystem-i" transform="translate(0, 0)">
    <g id="antenna">
      <g id="lhca">
        <path d="M891.728,291.597 L916.885,291.597 C922.992,291.597 927.943,296.413 927.943,302.355 L927.943,374.15 C927.943,380.092 922.992,384.909 916.885,384.909 L891.728,384.909 C885.621,384.909 880.67,380.092 880.67,374.15 L880.67,302.355 C880.67,296.413 885.621,291.597 891.728,291.597 z" fill="#008000"/>
        <path d="M891.728,291.597 L916.885,291.597 C922.992,291.597 927.943,296.413 927.943,302.355 L927.943,374.15 C927.943,380.092 922.992,384.909 916.885,384.909 L891.728,384.909 C885.621,384.909 880.67,380.092 880.67,374.15 L880.67,302.355 C880.67,296.413 885.621,291.597 891.728,291.597 z" fill-opacity="0" stroke="#3B3838" stroke-width="1"/>
      </g>
      <g id="lhca">
        <path d="M786.926,291.597 L812.083,291.597 C818.19,291.597 823.141,296.413 823.141,302.355 L823.141,374.15 C823.141,380.092 818.19,384.909 812.083,384.909 L786.926,384.909 C780.819,384.909 775.869,380.092 775.869,374.15 L775.869,302.355 C775.869,296.413 780.819,291.597 786.926,291.597 z" fill="#008000"/>
        <path d="M786.926,291.597 L812.083,291.597 C818.19,291.597 823.141,296.413 823.141,302.355 L823.141,374.15 C823.141,380.092 818.19,384.909 812.083,384.909 L786.926,384.909 C780.819,384.909 775.869,380.092 775.869,374.15 L775.869,302.355 C775.869,296.413 780.819,291.597 786.926,291.597 z" fill-opacity="0" stroke="#3B3838" stroke-width="1"/>
      </g>
    </g>
    <g id="core">
      <path d="M869.29,279.265 C886.885,279.265 901.148,305.674 901.148,338.253 C901.148,370.831 886.885,397.241 869.29,397.241 C862.033,397.14 856.035,392.784 851.656,387.306 C847.349,392.99 841.219,396.904 834.021,397.241 C816.427,397.241 802.164,370.831 802.164,338.253 C802.164,305.674 816.427,279.265 834.021,279.265 C841.278,279.365 847.276,283.721 851.656,289.199 C855.963,283.515 862.093,279.602 869.29,279.265 z" fill="#0CB04B"/>
      <path d="M869.29,279.265 C886.885,279.265 901.148,305.674 901.148,338.253 C901.148,370.831 886.885,397.241 869.29,397.241 C862.033,397.14 856.035,392.784 851.656,387.306 C847.349,392.99 841.219,396.904 834.021,397.241 C816.427,397.241 802.164,370.831 802.164,338.253 C802.164,305.674 816.427,279.265 834.021,279.265 C841.278,279.365 847.276,283.721 851.656,289.199 C855.963,283.515 862.093,279.602 869.29,279.265 z" fill-opacity="0" stroke="#3B3838" stroke-width="1"/>
    </g>
    <text transform="matrix(1, 0, 0, 1, 851.544, 378.284)" id="center">
      <tspan x="-10.509" y="4.5" font-family="Arial-BoldMT" font-size="14" fill="#000000">P</tspan>
      <tspan x="-1.171" y="4.5" font-family="Arial-BoldMT" font-size="7" fill="#000000">700</tspan>
    </text>
    <g id="cofactors">
      <text transform="matrix(1, 0, 0, 1, 839.873, 310.422)">
        <tspan x="-5.055" y="1.5" font-family="Arial,ArialMT" font-size="10" fill="#000000">F</tspan>
        <tspan x="1.053" y="1.5" font-family="Arial,ArialMT" font-size="6" fill="#000000">A</tspan>
      </text>
      <text transform="matrix(1, 0, 0, 1, 855.114, 296.961)">
        <tspan x="-5.055" y="1.5" font-family="Arial,ArialMT" font-size="10" fill="#000000">F</tspan>
        <tspan x="1.053" y="1.5" font-family="Arial,ArialMT" font-size="6" fill="#000000">B</tspan>
      </text>
      <text transform="matrix(1, 0, 0, 1, 851.544, 325.517)">
        <tspan x="-5.055" y="1.5" font-family="Arial,ArialMT" font-size="10" fill="#000000">F</tspan>
        <tspan x="1.053" y="1.5" font-family="Arial,ArialMT" font-size="6" fill="#000000">X</tspan>
      </text>
      <path d="M845.989,318.422 L841.815,314.773" fill-opacity="0" stroke="#000000" stroke-width="1"/>
      <path d="M844.714,303.422 L848.888,299.835" fill-opacity="0" stroke="#000000" stroke-width="1"/>
      <path d="M839.814,378.658 L828.749,364.75" fill-opacity="0" stroke="#000000" stroke-width="1"/>
      <path d="M875.91,364.75 L864.844,378.658" fill-opacity="0" stroke="#000000" stroke-width="1" stroke-dasharray="2,2"/>
      <path d="M825.237,354.881 L828.748,338.892" fill-opacity="0" stroke="#000000" stroke-width="1"/>
      <path d="M836.778,331.271 L845.329,327.239" fill-opacity="0" stroke="#000000" stroke-width="1"/>
      <text transform="matrix(1, 0, 0, 1, 827.814, 334.111)">
        <tspan x="-7.004" y="1.5" font-family="Arial,ArialMT" font-size="10" fill="#000000">A</tspan>
        <tspan x="-0.334" y="1.5" font-family="Arial,ArialMT" font-size="6" fill="#000000">1B</tspan>
      </text>
      <text transform="matrix(1, 0, 0, 1, 825.167, 360.584)">
        <tspan x="-7.004" y="1.5" font-family="Arial,ArialMT" font-size="10" fill="#000000">A</tspan>
        <tspan x="-0.334" y="1.5" font-family="Arial,ArialMT" font-size="6" fill="#000000">0B</tspan>
      </text>
      <text transform="matrix(1, 0, 0, 1, 877.883, 334.726)">
        <tspan x="-7.004" y="1.5" font-family="Arial,ArialMT" font-size="10" fill="#000000">A</tspan>
        <tspan x="-0.334" y="1.5" font-family="Arial,ArialMT" font-size="6" fill="#000000">1A</tspan>
      </text>
      <text transform="matrix(1, 0, 0, 1, 879.769, 360.584)">
        <tspan x="-7.004" y="1.5" font-family="Arial,ArialMT" font-size="10" fill="#000000">A</tspan>
        <tspan x="-0.334" y="1.5" font-family="Arial,ArialMT" font-size="6" fill="#000000">0A</tspan>
      </text>
      <path d="M859.33,327.239 L867.88,331.271" fill-opacity="0" stroke="#000000" stroke-width="1" stroke-dasharray="2,2"/>
      <path d="M875.91,338.892 L879.422,354.881" fill-opacity="0" stroke="#000000" stroke-width="1" stroke-dasharray="2,2"/>
    </g>
    <g id="light">
      <path d="M782.7,275.747 L765.376,255.981 L771.055,253.128 L757.394,229.837 L730.296,245.066 L754.259,261.862 L746.255,267.226 L769.287,283.728 L762.321,286.945 L799.497,313.819 L777.083,279.153 L782.7,275.747 z" fill="#FFEC7F"/>
      <path d="M757.394,229.837 L771.055,253.128 L765.376,255.981 L782.7,275.747 L782.7,275.747 L777.083,279.153 L799.497,313.819 L762.321,286.945 L769.286,283.728 L746.255,267.226 L754.259,261.862 L730.296,245.066 L757.394,229.837 z M757.028,231.19 L732.171,245.159 L754.833,261.043 L756.027,261.881 L754.815,262.693 L748.01,267.253 L769.869,282.915 L771.265,283.915 L769.706,284.635 L764.292,287.136 L795.763,309.885 L776.243,279.696 L775.684,278.832 L776.564,278.298 L781.163,275.51 L764.624,256.641 L763.772,255.668 L764.927,255.088 L769.652,252.714 L757.028,231.19 z" fill="#000000"/>
    </g>
    <g id="label">
      <text transform="matrix(1, 0, 0, 1, 848.998, 574.538)">
        <tspan x="-66.527" y="4.5" font-family="Arial,ArialMT" font-size="21" fill="#000000">Photosystem I</tspan>
      </text>
    </g>
  </g>
</svg>`;


const photosystemI = ({ center = false, light = true, cofactors = false, antenna = true, lightColor = "#FFEC7F", lightSize = 1, coreColor = "#0CB04B", antennaColor = "#008000", label = true, position = null } = {}) => {

  let draw = SVG();
  draw.svg(el);

  if (coreColor) {
    let coreShapes = draw.find('#photosystem-i #core path');
    coreShapes.forEach(shape => shape.fill(coreColor));
  }

  if (antennaColor) {
    let antennaShapes = draw.find('#photosystem-i #antenna path');
    antennaShapes.forEach(shape => shape.fill(antennaColor));
  }

  if (lightColor) {
    let lightShape = draw.findOne('#photosystem-i #light path');
    lightShape.fill(lightColor)
  }

  if (!light) {
    let shape = draw.findOne('#photosystem-i #light');
    shape.opacity(0);
  }

  if (!center) {
    let shape = draw.findOne('#photosystem-i #center');
    shape.opacity(0);
  }

  if (!cofactors) {
    let shape = draw.findOne('#photosystem-i #cofactors');
    shape.opacity(0);
  }

  if (!antenna) {
    let shape = draw.findOne('#photosystem-i #antenna');
    shape.opacity(0);
  }

  if (!label) {
    let text = draw.findOne('#photosystem-i #label');
    text.opacity(0);
  }

  if (lightSize) {
    let shape = draw.findOne('#photosystem-i #light');
    shape.transform({
      origin: 'bottom right',
      scale: Number(lightSize),
    });
  }

  if (position) {
    let move = draw.findOne('#photosystem-i');
    move.transform({
      translateX: position - move.x()
    })
  }

  return draw.findOne('svg').svg(false);
}

export default photosystemI;

export const settings = () => {

  let draw = SVG();
  draw.svg(el);

  let move = draw.findOne('#photosystem-i')

  return {
    "id": "photosystem-i",
    "headerTitle": "Photosystem I",
    "show": true,
    "options": [
      { "type": "check", "name": "center", "value": false, "label": "Reaction Center" },
      { "type": "check", "name": "cofactors", "value": false, "label": "Cofactors" },
      { "type": "check", "name": "light", "value": true, "label": "Light" },
      { "type": "check", "name": "antenna", "value": true, "label": "Antenna (LHCa)" },
      { "type": "check", "name": "label", "value": true, "label": "Label" },
      { "type": "color", "name": "coreColor", "value": "#0CB04B", "label": "Core Color" },
      { "type": "color", "name": "lightColor", "value": "#FFEC7F", "label": "Light Color" },
      { "type": "color", "name": "antennaColor", "value": "#008000", "label": "Antenna Color" },
      { "type": "range", "name": "lightSize", "value": 1, "label": "Light (Size)", "step": "0.1", "min": "0.5", "max": "1.5" },
      { "type": "range", "name": "position", "value": move.x(), "label": "Position", "step": "1", "min": "0", "max": 1400 - move.width() },
    ]
  }
}

export const legend = () => {
  return `The reaction center of PSI (P₇₀₀) oxidizes the luminal electron donor PC or cytochrome c₆ after being excited and transfers the electron to the stromal acceptor, ferredoxin (Fd).`
}